:root {
  --color-bg-light: #f0f0f3;
  --color-text-light: #222;
  --color-bg-dark: #121212;
  --color-text-dark: #eee;
  --color-bg-vibrant: #fffcf0;
  --color-text-vibrant: #1b1b3a;

  --primary-color: #0078d7; /* A strong blue */
  --accent-color: #ff5c57; /* A vibrant red-orange */

  --card-bg-light: #fff;
  --card-bg-dark: #1e1e1e;
  --card-bg-vibrant: #fff7e6;

  --border-color-light: #ddd;
  --border-color-dark: #333;
}

/* Base Body Styles - Increased Font Size & Readability */
body {
  font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* A clear, modern font */
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  transition: background-color 0.3s ease, color 0.3s ease;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  font-size: 1.1rem; /* Increased base font size */
  line-height: 1.6; /* Improved line spacing for readability */
}

/* Theme-specific styles */
body.light {
  background-color: var(--color-bg-light);
  color: var(--color-text-light);
}

body.dark {
  background-color: var(--color-bg-dark);
  color: var(--color-text-dark);
}

body.vibrant {
  background-color: var(--color-bg-vibrant);
  color: var(--color-text-vibrant);
}

/* Header Styles */
header {
  padding: 1.5rem; /* Increased padding */
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--primary-color);
  color: white;
  flex-wrap: wrap;
  gap: 1.5rem; /* Increased gap */
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

header h1 {
  margin: 0;
  font-weight: 700;
  font-size: 2.2rem; /* Adjusted H1 size */
}

.theme-switcher label {
  margin-right: 0.5rem;
  font-size: 1rem;
}

.theme-switcher select {
  padding: 0.5rem 0.8rem;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  font-size: 1rem;
  cursor: pointer;
  -webkit-appearance: none; /* Remove default arrow on some browsers */
  -moz-appearance: none;
  appearance: none;
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22white%22%20d%3D%22M287%2C197.3L159.2%2C69.5c-4.7-4.7-12.3-4.7-17%2C0L5.4%2C197.3c-4.7%2C4.7-4.7%2C12.3%2C0%2C17l19.8%2C19.8c4.7%2C4.7%2C12.3%2C4.7%2C17%2C0l106.8-106.8l106.8%2C106.8c4.7%2C4.7%2C12.3%2C4.7%2C17%2C0l19.8-19.8C291.7%2C209.6%2C291.7%2C202%2C287%2C197.3z%22%2F%3E%3C%2Fsvg%3E'); /* Custom dropdown arrow */
  background-repeat: no-repeat;
  background-position: right 0.7em top 50%;
  background-size: 0.65em auto;
}

header button {
  padding: 0.8rem 1.5rem; /* Increased padding */
  border: none;
  border-radius: 8px; /* Slightly more rounded corners */
  background-color: var(--accent-color);
  color: white;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.2s ease, transform 0.1s ease;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

header button:hover {
  background-color: #ff7873; /* Slightly lighter accent */
  transform: translateY(-1px);
}

header button:active {
  transform: translateY(0);
}

/* Main Content Layout */
main {
  flex: 1;
  padding: 2rem; /* Increased overall padding */
  max-width: 1200px;
  margin: 0 auto;
  width: 100%;
  box-sizing: border-box;
}

/* Assistant Section */
.assistant-section {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.5rem; /* Increased gap */
  margin-bottom: 2.5rem; /* Increased margin */
}

@media (min-width: 768px) {
  .assistant-section {
    grid-template-columns: 1fr 1fr;
  }
}

.box {
  background-color: var(--card-bg-light);
  border-radius: 10px; /* Slightly more rounded */
  padding: 1.8rem; /* Increased padding */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

body.dark .box {
  background-color: var(--card-bg-dark);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

body.vibrant .box {
  background-color: var(--card-bg-vibrant);
  box-shadow: 0 4px 12px rgba(27, 27, 58, 0.15);
}

.box h2 {
  margin-top: 0;
  margin-bottom: 1rem;
  font-size: 1.6rem; /* Adjusted H2 size */
  color: var(--primary-color);
  font-weight: 600;
}

.box p {
  margin-bottom: 0;
  font-size: 1.05rem; /* Slightly larger paragraph text */
}

/* Dashboard Section */
.dashboard {
  margin-bottom: 2.5rem; /* Increased margin */
}

.dashboard h2 {
  font-size: 2rem; /* Adjusted H2 size for dashboard title */
  margin-bottom: 1.8rem; /* Increased margin */
  text-align: center;
  color: var(--color-text-light); /* Default to light text, themes will override */
}

body.dark .dashboard h2 {
  color: var(--color-text-dark);
}

body.vibrant .dashboard h2 {
  color: var(--color-text-vibrant);
}

.dashboard {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem; /* Increased gap between cards */
}

.card {
  background-color: var(--card-bg-light);
  border-radius: 10px; /* Slightly more rounded */
  padding: 1.8rem; /* Increased padding */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
  display: flex;
  flex-direction: column;
}

body.dark .card {
  background-color: var(--card-bg-dark);
  box-shadow: none; /* Dark cards often look better with less prominent shadows */
  border: 1px solid var(--border-color-dark); /* Add a subtle border for definition */
}

body.vibrant .card {
  background-color: var(--card-bg-vibrant);
  box-shadow: 0 4px 12px rgba(27, 27, 58, 0.15);
}

.card h4 {
  margin-top: 0;
  margin-bottom: 1rem; /* Increased margin */
  font-weight: 700;
  font-size: 1.25rem; /* Adjusted H4 size */
  color: var(--primary-color); /* Highlight card titles */
}

.card p {
  font-size: 1rem; /* Consistent paragraph size within cards */
  margin-bottom: 0.8rem;
}

/* Task and Note Lists */
#taskList,
#notesList {
  list-style-type: none; /* Remove default bullets */
  padding: 0;
  margin: 0;
  max-height: 180px; /* Increased max-height for more visible items */
  overflow-y: auto;
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: var(--primary-color) var(--card-bg-light); /* Firefox */
}

/* Custom scrollbar for Webkit browsers */
#taskList::-webkit-scrollbar,
#notesList::-webkit-scrollbar {
  width: 8px;
}

#taskList::-webkit-scrollbar-track,
#notesList::-webkit-scrollbar-track {
  background: var(--card-bg-light);
  border-radius: 10px;
}

body.dark #taskList::-webkit-scrollbar-track,
body.dark #notesList::-webkit-scrollbar-track {
  background: var(--card-bg-dark);
}

#taskList::-webkit-scrollbar-thumb,
#notesList::-webkit-scrollbar-thumb {
  background-color: var(--primary-color);
  border-radius: 10px;
  border: 2px solid var(--card-bg-light);
}

body.dark #taskList::-webkit-scrollbar-thumb,
body.dark #notesList::-webkit-scrollbar-thumb {
  border: 2px solid var(--card-bg-dark);
}


#taskList li,
#notesList li {
  background-color: rgba(0, 120, 215, 0.05); /* Light background for items */
  padding: 0.7rem 1rem; /* Adjusted padding */
  margin-bottom: 0.6rem; /* Spacing between list items */
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 1rem; /* Consistent size */
  border: 1px solid var(--border-color-light); /* Subtle border for definition */
}

body.dark #taskList li,
body.dark #notesList li {
  background-color: rgba(58, 134, 255, 0.1);
  border: 1px solid var(--border-color-dark);
}

#taskList li span,
#notesList li span {
  flex-grow: 1;
  cursor: pointer;
}

#taskList li.completed span {
  text-decoration: line-through;
  color: #888;
}

.due-date {
  font-size: 0.9rem;
  color: #777;
  margin-left: 10px;
  white-space: nowrap; /* Prevent due date from wrapping if short */
}

body.dark .due-date {
  color: #bbb;
}

.delete-btn {
  background-color: var(--accent-color);
  color: white;
  border: none;
  border-radius: 50%;
  width: 28px;
  height: 28px;
  font-size: 0.9rem;
  font-weight: bold;
  cursor: pointer;
  margin-left: 1rem;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s ease;
}

.delete-btn:hover {
  background-color: #d13a3a;
}

/* Budget Overview */
.budget-overview canvas {
  max-width: 100%;
  height: auto;
  max-height: 250px; /* Adjust max height for chart */
  margin-top: 1rem;
}

/* Form Input Styles (for new task/note) */
.card input[type="text"],
.card textarea {
  width: 100%;
  padding: 10px 12px; /* Increased padding */
  margin-bottom: 10px;
  border: 1px solid var(--border-color-light);
  border-radius: 6px;
  font-size: 1rem;
  box-sizing: border-box;
  background-color: var(--color-bg-light); /* Match background */
  color: var(--color-text-light); /* Match text color */
}

body.dark .card input[type="text"],
body.dark .card textarea {
  border-color: var(--border-color-dark);
  background-color: #2a2a2a; /* Darker input background */
  color: var(--color-text-dark);
}

.card input[type="text"]::placeholder,
.card textarea::placeholder {
  color: #999;
}

body.dark .card input[type="text"]::placeholder,
body.dark .card textarea::placeholder {
  color: #777;
}

.card button {
  width: auto; /* Allow button to size to content */
  padding: 0.8rem 1.2rem; /* Consistent button padding */
  border: none;
  border-radius: 6px;
  background-color: var(--primary-color);
  color: white;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.2s ease;
  align-self: flex-start; /* Align button to start of card */
}

.card button:hover {
  background-color: #0060ad; /* Darker primary on hover */
}


/* Gamification Section */
.gamification {
  background-color: var(--card-bg-light);
  padding: 2rem; /* Increased padding */
  border-radius: 10px; /* Slightly more rounded */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  text-align: center;
  max-width: 600px; /* Wider max-width */
  margin: 2.5rem auto 3rem auto; /* Increased top margin */
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

body.dark .gamification {
  background-color: var(--card-bg-dark);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  border: 1px solid var(--border-color-dark);
}

body.vibrant .gamification {
  background-color: var(--card-bg-vibrant);
  box-shadow: 0 4px 12px rgba(27, 27, 58, 0.15);
}

.gamification h2 {
  font-size: 1.8rem; /* Adjusted H2 size */
  margin-bottom: 1.5rem; /* Increased margin */
  color: var(--primary-color);
}

.gamification p {
  font-size: 1.1rem; /* Consistent paragraph size */
  margin-bottom: 0.8rem;
}

.badges {
  margin-top: 1.5rem; /* Increased margin */
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 0.8rem; /* Increased gap */
}

.badge {
  background-color: var(--accent-color);
  color: white;
  padding: 0.6rem 1.2rem; /* Adjusted padding */
  border-radius: 20px; /* More rounded pill shape */
  font-size: 0.95rem;
  font-weight: 500;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Footer Styles */
footer {
  padding: 1.5rem; /* Increased padding */
  background: var(--primary-color);
  color: white;
  text-align: center;
  margin-top: auto; /* Push footer to bottom */
  box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.2);
}

footer p {
  margin: 0;
  font-size: 0.95rem; /* Slightly larger footer text */
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  header {
    flex-direction: column;
    align-items: flex-start;
    gap: 1rem;
  }

  header h1 {
    font-size: 1.8rem;
  }

  header button {
    width: 100%;
    text-align: center;
  }

  main {
    padding: 1.5rem;
  }

  .dashboard {
    grid-template-columns: 1fr; /* Stack cards on smaller screens */
  }

  .box {
    padding: 1.5rem;
  }

  .box h2 {
    font-size: 1.4rem;
  }

  .gamification {
    padding: 1.5rem;
  }
}